{"remainingRequest":"C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\25194\\Desktop\\pmsys\\src\\components\\page\\AdminLogin.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\25194\\Desktop\\pmsys\\src\\components\\page\\AdminLogin.vue","mtime":1716877304131},{"path":"C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713940553201},{"path":"C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\babel-loader\\lib\\index.js","mtime":1713699606133},{"path":"C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713940553201},{"path":"C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\vue-loader\\lib\\index.js","mtime":1713699628743},{"path":"C:\\Users\\25194\\Desktop\\pmsys\\babel.config.js","mtime":1717413171333},{"path":"C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713940553201},{"path":"C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\babel-loader\\lib\\index.js","mtime":1713699606133},{"path":"C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713940553201},{"path":"C:\\Users\\25194\\Desktop\\pmsys\\node_modules\\vue-loader\\lib\\index.js","mtime":1713699628743}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/Users/25194/Desktop/pmsys/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      param: {\n        userId: '',\n        password: ''\n      },\n      rules: {\n        userId: [{\n          required: true,\n          message: '请输入用户id',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm: function submitForm() {\n      var _this = this;\n      console.info(this.param);\n      this.$refs.loginForm.validate( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(valid) {\n          var response, userData;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                if (!valid) {\n                  _context.next = 14;\n                  break;\n                }\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.post('http://localhost:8080/adminlogin', _this.param);\n              case 4:\n                response = _context.sent;\n                if (response.data.code === 1) {\n                  _this.$message.success('登录成功');\n                  userData = {\n                    userId: response.data.data.userId,\n                    userType: response.data.data.userType,\n                    username: response.data.data.username,\n                    token: response.data.data.token,\n                    image: response.data.data.image,\n                    lastLoginDate: response.data.data.lastLoginDate\n                  };\n                  localStorage.setItem('user', JSON.stringify(userData));\n                  _this.$router.push('/dashboard'); // 跳转到仪表板\n                } else {\n                  _this.$message.error(response.data.msg || '登录失败'); // 显示错误信息\n                }\n                _context.next = 12;\n                break;\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                _this.$message.error('网络错误或服务器无响应');\n                console.error('Error on login:', _context.t0);\n              case 12:\n                _context.next = 15;\n                break;\n              case 14:\n                _this.$message.error('请输入有效的用户名和密码');\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, null, [[1, 8]]);\n        }));\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }\n};",{"version":3,"names":["axios","data","param","userId","password","rules","required","message","trigger","methods","submitForm","_this","console","info","$refs","loginForm","validate","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","valid","response","userData","wrap","_callee$","_context","prev","next","post","sent","code","$message","success","userType","username","token","image","lastLoginDate","localStorage","setItem","JSON","stringify","$router","push","error","msg","t0","stop","_x","apply","arguments"],"sources":["src/components/page/AdminLogin.vue"],"sourcesContent":["<template>\n    <div class=\"login-wrap\">\n        <div class=\"ms-login\">\n            <div class=\"ms-title\">后台管理系统</div>\n            <el-form :model=\"param\" :rules=\"rules\" ref=\"loginForm\" label-width=\"0px\" class=\"ms-content\">\n                <el-form-item prop=\"userid\">\n                    <el-input v-model=\"param.userId\" placeholder=\"userId\">\n                        <el-button slot=\"prepend\" icon=\"el-icon-user\"></el-button>\n                    </el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input type=\"password\" placeholder=\"Password\" v-model=\"param.password\" @keyup.enter.native=\"submitForm\">\n                        <el-button slot=\"prepend\" icon=\"el-icon-lock\"></el-button>\n                    </el-input>\n                </el-form-item>\n                <div class=\"login-btn\">\n                    <el-button type=\"primary\" @click=\"submitForm\">登录</el-button>\n                </div>\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n    data() {\n        return {\n            \n            param: {\n                userId: '',\n                password: '',\n            },\n            rules: {\n                userId: [{ required: true, message: '请输入用户id', trigger: 'blur' }],\n                password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n            }\n        };\n    },\n    methods: {\n        submitForm() {\n            console.info(this.param)\n            this.$refs.loginForm.validate(async valid => {\n                if (valid) {\n                    try {\n                        const response = await axios.post('http://localhost:8080/adminlogin', this.param);\n                        if (response.data.code === 1) {\n                            this.$message.success('登录成功');\n                            const userData = {\n                                userId: response.data.data.userId,\n                                userType: response.data.data.userType,\n                                username: response.data.data.username,\n                                token: response.data.data.token,\n                                image: response.data.data.image,\n                                lastLoginDate:response.data.data.lastLoginDate\n                            };\n                            localStorage.setItem('user', JSON.stringify(userData));\n                            this.$router.push('/dashboard');  // 跳转到仪表板\n                        } else {\n                            this.$message.error(response.data.msg || '登录失败');  // 显示错误信息\n                        }\n                    } catch (error) {\n                        this.$message.error('网络错误或服务器无响应');\n                        console.error('Error on login:', error);\n                    }\n                } else {\n                    this.$message.error('请输入有效的用户名和密码');\n                }\n            });\n        }\n    }\n};\n</script>\n\n\n<style scoped>\n.login-wrap {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background-image: url(../../assets/img/login-bg.jpg);\n    background-size: 100%;\n}\n.ms-title {\n    width: 100%;\n    line-height: 50px;\n    text-align: center;\n    font-size: 20px;\n    color: #fff;\n    border-bottom: 1px solid #ddd;\n}\n.ms-login {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 350px;\n    margin: -190px 0 0 -175px;\n    border-radius: 5px;\n    background: rgba(255, 255, 255, 0.3);\n    overflow: hidden;\n}\n.ms-content {\n    padding: 30px 30px;\n}\n.login-btn {\n    text-align: center;\n}\n.login-btn button {\n    width: 100%;\n    height: 36px;\n    margin-bottom: 10px;\n}\n.login-tips {\n    font-size: 12px;\n    line-height: 30px;\n    color: #fff;\n}\n</style>"],"mappings":";;AAwBA,OAAAA,KAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MAEAC,KAAA;QACAC,MAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAF,MAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,QAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,UAAA,WAAAA,WAAA;MAAA,IAAAC,KAAA;MACAC,OAAA,CAAAC,IAAA,MAAAX,KAAA;MACA,KAAAY,KAAA,CAAAC,SAAA,CAAAC,QAAA;QAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAAC,QAAAC,KAAA;UAAA,IAAAC,QAAA,EAAAC,QAAA;UAAA,OAAAL,kBAAA,CAAAM,IAAA,UAAAC,SAAAC,QAAA;YAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;cAAA;gBAAA,KACAP,KAAA;kBAAAK,QAAA,CAAAE,IAAA;kBAAA;gBAAA;gBAAAF,QAAA,CAAAC,IAAA;gBAAAD,QAAA,CAAAE,IAAA;gBAAA,OAEA7B,KAAA,CAAA8B,IAAA,qCAAAnB,KAAA,CAAAT,KAAA;cAAA;gBAAAqB,QAAA,GAAAI,QAAA,CAAAI,IAAA;gBACA,IAAAR,QAAA,CAAAtB,IAAA,CAAA+B,IAAA;kBACArB,KAAA,CAAAsB,QAAA,CAAAC,OAAA;kBACAV,QAAA;oBACArB,MAAA,EAAAoB,QAAA,CAAAtB,IAAA,CAAAA,IAAA,CAAAE,MAAA;oBACAgC,QAAA,EAAAZ,QAAA,CAAAtB,IAAA,CAAAA,IAAA,CAAAkC,QAAA;oBACAC,QAAA,EAAAb,QAAA,CAAAtB,IAAA,CAAAA,IAAA,CAAAmC,QAAA;oBACAC,KAAA,EAAAd,QAAA,CAAAtB,IAAA,CAAAA,IAAA,CAAAoC,KAAA;oBACAC,KAAA,EAAAf,QAAA,CAAAtB,IAAA,CAAAA,IAAA,CAAAqC,KAAA;oBACAC,aAAA,EAAAhB,QAAA,CAAAtB,IAAA,CAAAA,IAAA,CAAAsC;kBACA;kBACAC,YAAA,CAAAC,OAAA,SAAAC,IAAA,CAAAC,SAAA,CAAAnB,QAAA;kBACAb,KAAA,CAAAiC,OAAA,CAAAC,IAAA;gBACA;kBACAlC,KAAA,CAAAsB,QAAA,CAAAa,KAAA,CAAAvB,QAAA,CAAAtB,IAAA,CAAA8C,GAAA;gBACA;gBAAApB,QAAA,CAAAE,IAAA;gBAAA;cAAA;gBAAAF,QAAA,CAAAC,IAAA;gBAAAD,QAAA,CAAAqB,EAAA,GAAArB,QAAA;gBAEAhB,KAAA,CAAAsB,QAAA,CAAAa,KAAA;gBACAlC,OAAA,CAAAkC,KAAA,oBAAAnB,QAAA,CAAAqB,EAAA;cAAA;gBAAArB,QAAA,CAAAE,IAAA;gBAAA;cAAA;gBAGAlB,KAAA,CAAAsB,QAAA,CAAAa,KAAA;cAAA;cAAA;gBAAA,OAAAnB,QAAA,CAAAsB,IAAA;YAAA;UAAA,GAAA5B,OAAA;QAAA,CAEA;QAAA,iBAAA6B,EAAA;UAAA,OAAAjC,IAAA,CAAAkC,KAAA,OAAAC,SAAA;QAAA;MAAA;IACA;EACA;AACA","ignoreList":[]}]}
